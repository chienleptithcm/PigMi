<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liên hệ - Trà Sữa King tea</title>
    <link rel="stylesheet" href="../css/ContactStyle.css">
    <link rel="shortcut icon" type="image/png" href="../img/Logo/Logo1.png" />
    <link rel="stylesheet" href="../bootstrap-5.2.3-dist/css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="../bootstrap-5.2.3-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../fontawesome-free-6.4.2-web/css/all.min.css">
    <script src="../bootstrap-5.2.3-dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/jquery-3.4.1.min.js"></script>
    <script>
        function kiemtrahoten() {
            let hoten = $("#txtHoTen").val().trim();
            let reght = /^([\p{L}\s]+)$/u;

            if (hoten.length == 0) {
                $("#errHoTen").html("Họ tên không được để trống");
                $("#txtHoTen").focus();
                return false;
            } else if (!reght.test(hoten)) {
                $("#errHoTen").html("Họ tên không hợp lệ");
                $("#txtHoTen").focus();
                return false;
            } else {
                $('#errHoTen').html("");
                return true;
            }
        }

        function kiemtraemail() {
            let email = $("#email").val().trim();
            let regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

            if (email.length == 0) {
                $("#errEmail").html("Email không được để trống");
                $("#email").focus();
                return false;
            } else if (!regex.test(email)) {
                $("#errEmail").html("Email không hợp lệ");
                $("#email").focus();
                return false;
            } else {
                $('#errEmail').html("");
                return true;
            }
        }

        function kiemtrasdt() {
            let sdt = $("#txtSDT").val().trim();
            let regex = /^[0-9]{10,11}$/;

            if (sdt.length == 0) {
                $("#errSDT").html("Số điện thoại không được để trống");
                $("#txtSDT").focus();
                return false;
            } else if (!regex.test(sdt)) {
                $("#errSDT").html("Số điện thoại không hợp lệ");
                $("#txtSDT").focus();
                return false;
            } else {
                $('#errSDT').html("");
                return true;
            }
        }

        function kiemtracheckbox() {
            return $("#xn").is(":checked");
        }
        function kiemtraradio() {
            return $("input[name='feedbackType']:checked").length > 0;
        }

        function validateForm() {
            return kiemtrahoten() && kiemtraemail() && kiemtrasdt() && kiemtracheckbox() && kiemtraradio();
        }


        $(document).ready(function () {
            $("#txtHoTen").blur(function (e) {
                kiemtrahoten();
            });

            $("#email").blur(function (e) {
                kiemtraemail();
            });

            $("#txtSDT").blur(function (e) {
                kiemtrasdt();
            });

            $(".XacNhan").change(function (e) {
                kiemtracheckbox();
            });
            $()

            $(".post").submit(function (e) {
                if (!validateForm()) {
                    e.preventDefault();
                    alert("Vui lòng kiểm tra lại thông tin nhập");
                }
            });
        });
    </script>

</head>

<body>
    <div class="header position-sticky sticky-top">
        <div class="container">
            <div class="row">
                <div class="col-md-2 col-sm-4 col-4 px-0">
                    <img src="../img/Logo/Logo_header.png" class="img-fluid" alt="Logo">
                </div>
                <div class="col-md-4 col-sm-8 col-8 py-3">
                    <div class="input-group mb-3 ">
                        <input type="text" class="form-control" placeholder="Đến trang menu để tìm kiếm sản phẩm"
                            aria-label="Từ khóa tìm kiếm" aria-describedby="basic-addon2">
                        <span class="input-group-text" id="basic-addon2"><i class="fa-solid fa-magnifying-glass"></i>
                        </span>
                    </div>
                </div>
                <div class="col-md-4 col-sm-8 col-8 py-3 px-0">
                    <div class="row">
                        <div class="col">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="fs-3 text-info">
                                        <i class="fa-solid fa-phone"></i>
                                    </div>
                                </div>
                                <div class="col-md-8 px-0">
                                    Hotline<br>
                                    <strong class="text-info">19008198</strong>
                                </div>
                            </div>
                        </div>
                        <div class="col">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="fs-3 text-info">
                                        <a href="dangnhap.html" id="taikhoan">
                                            <i class="fa-regular fa-circle-user"></i>
                                        </a>
                                    </div>
                                </div>
                                <div class="col-md-8 px-0">
                                    Xin chào!<br>
                                    <strong class="text-info" id="Dangnhap">Đăng nhập</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-2 col-sm-4 col-4 py-3">
                    <div class="row">
                        <div class="col-md-6 col-6">
                            <a href="#" class="fs-2 position-relative">
                                <i class="fa-regular fa-heart"></i>
                            </a>
                        </div>
                        <div class="col-md-6 col-6">
                            <a href="#" class="fs-2 position-relative" class="btn btn-primary" data-bs-toggle="modal"
                                data-bs-target="#" id="giohang" onclick="ttgiohang()">
                                <i class="fa-solid fa-bag-shopping"></i>
                            </a>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="nav ">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 px-0">
                        <nav class="navbar navbar-expand-lg bg-body-tertiary">
                            <div class="container-fluid px-0">
                                <a class="navbar-brand d-none" href="#">Navbar</a>
                                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                                    aria-expanded="false" aria-label="Toggle navigation">
                                    <span class="navbar-toggler-icon"></span>
                                </button>
                                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                                    <ul class="navbar-nav me-auto mb-2 mb-lg-0 ">
                                        <li class="nav-item px-4 py-2 ">
                                            <a class="nav-link" aria-current="page" href="index.html">Trang chủ</a>
                                        </li>
                                        <li class="nav-item px-4 py-2" aria-current="page" href="#">
                                            <a class="nav-link" href="Info.html">Giới thiệu</a>
                                        </li>
                                        <li class="nav-item dropdown btn-group px-4 py-2 ">
                                            <a class="nav-link " href="Menu.html" role="button">
                                                Menu
                                            </a>
                                            <a class="nav-link dropdown-toggle" href="#" role="button"
                                                data-bs-toggle="dropdown"></a>
                                            <ul class="dropdown-menu">
                                                <li><a class="dropdown-item" href="#Thucuong">Thức uống</a></li>
                                                <li><a class="dropdown-item" href="#doannhe">Bánh ngọt</a></li>
                                            </ul>
                                        </li>
                                        <li class="nav-item px-4 py-2" aria-current="page" href="#">
                                            <a class="nav-link" href="News.html">Tin tức</a>
                                        </li>
                                        <li class="nav-item px-4 py-2 active" aria-current="page" href="#">
                                            <a class="nav-link" href="contact.html">Liên hệ</a>
                                        </li>
                                    </ul>
                                    <div class="socnet">
                                        <li class="nav-item px-4 py-2">
                                            <span class="fs-2 px-1">
                                                <i class="fa-brands fa-twitter" style="color: #1f93d6;"></i>
                                            </span>
                                            <span class="fs-2  px-1">
                                                <i class="fa-brands fa-facebook" style="color: #1f93d6;;"></i>
                                            </span>
                                            <span class="fs-2  px-1 ">
                                                <i class="fa-brands fa-telegram" style="color: #3c7cec;"></i>
                                            </span>
                                        </li>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container-fluid">
        <div class="header-contact row">
            <div class="col-12">
                <h1 class="text-black">Liên hệ với trà sữa Tea Milk</h1>
            </div>
            <div class="col-12">
                <p class=" Pleasse alert-danger text-black">Please fill the form to submit your feedback to Milk Tea.
                </p>
            </div>
        </div>
        <div class="container">
            <div class="container_contact mx-auto ">
                <h1 class="text-center">Thông tin phản hồi</h1>
                <p>Milk Tea luôn mong muốn nhận được nhưng phản hồi quý giá của quý khách hàng để có cơ hội hoàn thiện
                    sản phẩm, dịch vụ hơn nữa. Những đóng góp của quý khách hàng luôn là tài sản vô giá đối với chúng
                    tôi</p>
                <form action="#">
                    <div class="form-group">
                        <label for="name">Họ và tên:</label>
                        <input type="text" class="form-control" id="txtHoTen" name="name" placeholder="Họ và tên">
                        <span id="errHoTen" class="err text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input type="email" class="form-control" id="email" name="email" placeholder="Email">
                        <span id="errEmail" class="err text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label for="Sdt">Số điện thoại:</label>
                        <input type="text" class="form-control" id="txtSDT" placeholder="Số điện thoại">
                        <span id="errSDT" class="err text-danger"></span>
                    </div>
                    <div class="form-group">
                        <p><b>Vấn đề phản hồi</b></p>
                        <form>
                            <label>
                                <input type="radio" class="a" name="feedbackType" value="Than phiền" checked="true">
                                Than phiền
                            </label>
                            <label>
                                <input type="radio" class="a" name="feedbackType" value="Khen ngợi"> Khen ngợi
                            </label>
                            <label>
                                <input type="radio" class="a" name="feedbackType" value="Đề xuất"> Đề xuất
                            </label>
                            <label>
                                <input type="radio" class="a" name="feedbackType" value="Thẻ thành viên"> Thẻ thành viên
                            </label>
                            <label>
                                <input type="radio" class="a" name="feedbackType" value="Nhượng quyền"> Nhượng quyền
                            </label>
                            <label>
                                <input type="radio" class="a" name="feedbackType" value="Tuyển dụng"> Tuyển dụng
                            </label>
                            <label>
                                <input type="radio" class="a" name="feedbackType" value="Vấn đề khác"> Vấn đề khác
                            </label>

                            <br>

                            <label>
                                Nếu có ý kiến khác, vui lòng nhập ở đây:
                                <input type="text" name="otherInput" placeholder="Nhập ý kiến khác">
                            </label>

                            <br>

                        </form>

                    </div>
                    <div class="form-group">
                        <label for="message">Tin nhắn:</label>
                        <textarea class="form-control" id="message" name="message" rows="5"></textarea>
                    </div>
                </form>
            </div>
            <div class="row">
                <div class="col-12 col-sm-12">
                    <p class=" TT display-6"><small><b>THỎA THUẬN BẢO MẬT THÔNG TIN</b></small></p>
                </div>
                <div class="col-12 col-sm-12">
                    <ol type="1">
                        <li class="text-danger">MilkTea sẽ luôn giữ bí mật các thông tin của khách hàng và tuân thủ
                            những quy định pháp luật về bảo mật thông tin có liên quan.</li>
                        <li class="text-danger">MilkTea có thể tiết lộ thông tin cá nhân cho mục đích giải quyết
                            khiếu nại, than phiền của khách hàng cho:
                        </li>
                        <ul type="circle">
                            <li class="text-danger">
                                Các bộ phận trực thuộc Gong Cha Việt Nam.
                            </li>
                            <li class="text-danger">
                                Bên thứ ba được ủy quyền chính thức từ Gong Cha Việt Nam cho việc giải quyết các
                                than phiền, khiếu nại mang tính chất nghiêm trọng.
                            </li>
                        </ul>
                    </ol>
                </div>
                <div class="col-12 col-sm-12">
                    <p><b>* LƯU Ý:</b></p>
                    <p>Quý khách vui lòng cung cấp chính xác các thông tin cá nhân để Gong Cha có thể liên hệ giải quyết
                        các thắc mắc, phản hồi và phàn nàn của khách hàng một cách nhanh chóng nhất. <br>
                        Các ngày Thứ bảy, Chủ nhật, ngày lễ sẽ khiến quá trình giải quyết phản hồi của quý khách chậm
                        hơn thường lệ
                    </p>
                    <input class="XacNhan" type="checkbox" name="xn" id="xn" value="xn"><b>Tôi xác nhận các thông tin cá
                        nhân cung cấp ở trên là hoàn toàn chính xác và đồng ý để Gong Cha sử dụng các thông tin đó cho
                        mục đích giải quyết phản hồi.</b>
                </div>
                <form action="#" class="post">
                    <div class="bt1 col-12 col-sm-12">
                        <button type="submit" class="btn1 btn btn-primary btn-lg">Gửi</button>
                    </div>
                </form>
            </div>
        </div>
        <div class="card-footer">
            <footer class="footer">
                <div class="conten_ft bg-secondary row">
                    <p class="text-white text-center">&copy; 2023 Trà Sữa MilkTea. All rights reserved.</p>
                </div>
            </footer>
        </div>
    </div>
    
    <div class="modal fade" id="cartModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Giỏ hàng</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <table class="table table-bordered">
                        <tr>
                            <th>Sản phẩm</th>
                            <th>Đơn giá</th>
                            <th>Số lượng</th>
                            <th>Thành tiền</th>
                        </tr>
                        <tr>
                            <td>
                                <p class="fs-5 my-3">Trà sữa hoàng kim</p>
                            </td>
                            <td>
                                <p class="my-3 gia">50.000 VNĐ</p>
                            </td>
                            <td>
                                <input type="number" name="" class="my-3 soluong" value="1"
                                    onblur="calculateTotal(this)">
                            </td>
                            <td>
                                <p class="my-3 thanhtien"></p>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <p class="fs-5 my-3">Trà sữa sương sáo</p>
                            </td>
                            <td>
                                <p class="my-3 gia">45.000 VNĐ</p>
                            </td>
                            <td>
                                <input type="number" name="" class="my-3 soluong" value="1"
                                    onblur="calculateTotal(this)">
                            </td>
                            <td>
                                <p class="my-3 thanhtien"></p>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <p class="fs-5 my-3">Tiramisu</p>
                            </td>
                            <td>
                                <p class="my-3 gia">30.000 VNĐ</p>
                            </td>
                            <td>
                                <input type="number" name="" class="my-3 soluong" value="1"
                                    onblur="calculateTotal(this)">
                            </td>
                            <td>
                                <p class="my-3 thanhtien"></p>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3" class="h5">Tổng thanh toán</td>
                            <td id="totalAmount"></td>
                        </tr>
                    </table>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" type="button" onclick="dathang()">Đặt
                        hàng</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const name = localStorage.getItem("NameTT");

        var nameArray = name.split(' ');
        var firstName = nameArray[nameArray.length - 1];


        const TTDN = localStorage.getItem("trangthaiDN");
        if (TTDN == "True") {
            document.getElementById("Dangnhap").textContent = firstName;
            const taikhoan = document.querySelector("#taikhoan");
            taikhoan.href = "thongtin.html";
            var cart = document.querySelector('#giohang');
            cart.setAttribute('data-bs-target', '#cartModal');

        }

        function calculateTotal(input) {
            var giaElement = input.parentElement.previousElementSibling.querySelector(".gia");
            var thanhtienElement = input.parentElement.nextElementSibling.querySelector(".thanhtien");

            var gia = parseFloat(giaElement.textContent.replace(/[^\d]/g, ''));
            var soluong = input.value;
            var thanhtienValue = gia * soluong;
            var thanhtienFormatted = thanhtienValue.toLocaleString();
            thanhtienElement.textContent = thanhtienFormatted + " VNĐ";
            var totalAmount = calculateTotalAmount();
            document.getElementById("totalAmount").textContent = totalAmount.toLocaleString() + " VNĐ";
        }

        function calculateTotalAmount() {
            var totalAmount = 0;
            document.querySelectorAll(".soluong").forEach(function (input) {
                var giaElement = input.parentElement.previousElementSibling.querySelector(".gia");
                var soluong = input.value;
                var gia = parseFloat(giaElement.textContent.replace(/[^\d]/g, ''));
                var subtotal = gia * soluong;
                totalAmount += subtotal;
            });

            return totalAmount;
        }

        document.querySelectorAll(".soluong").forEach(function (input) {
            calculateTotal(input);
        });

        document.querySelectorAll(".soluong").forEach(function (input) {
            input.addEventListener("input", function () {
                calculateTotal(input);
            });
        });

        function dathang() {
            window.location.href = "thanhtoan.html";
        }

        function ttgiohang() {
            var cart = document.querySelector('#giohang');
            ttgh = cart.getAttribute('data-bs-target');
            if(ttgh == "#"){
                alert("Vui lòng đăng nhập để sử dụng tính năng!!!");
            }
        }
    </script>
</body>

</html>